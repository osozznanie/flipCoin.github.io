<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Telegram Web App</title>
  </head>
  <body>
    <h1>Информация о балансе</h1>
    <div id="result">Загрузка...</div>
    <script>
      if (window.Telegram && window.Telegram.WebApp) {
        const tg = window.Telegram.WebApp;

        function getChatId() {
          console.log("Telegram WebApp loaded: ", JSON.stringify(tg));
          return tg.initDataUnsafe?.user?.username || null;
        }

        function fetchBalance() {
          const chatId = getChatId();
          document.getElementById("result").innerHTML = chatId || "User not found.";
        }

        window.onload = function () {
          fetchBalance();
        };
      } else {
        console.error("Telegram WebApp is not available.");
        document.getElementById("result").innerHTML = "Telegram WebApp not available.";
      }
    </script>
  </body>
</html>
