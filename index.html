<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Telegram Web App</title>
    <script src="https://telegram.org/js/telegram-web-app.js?56"></script>
</head>
<body>
    <div style="padding: 20px; font-family: Arial, sans-serif;">
        <h1 style="color: #333;">Информация о балансе</h1>
        <div id="result" style="padding: 15px; background-color: #f5f5f5; border-radius: 8px;">Загрузка...</div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            try {
                if (window.Telegram && window.Telegram.WebApp) {
                    const tg = window.Telegram.WebApp;
                    tg.ready();
                    
                    function getUserInfo() {
                        const userInfo = {
                            username: tg.initDataUnsafe?.user?.username,
                            id: tg.initDataUnsafe?.chat?.id,
                            firstName: tg.initDataUnsafe?.user?.first_name
                        };
                        console.log("User Info:", userInfo);
                        return userInfo;
                    }

                    function displayUserInfo() {
                        const userInfo = getUserInfo();
                        if (userInfo.username) {
                            document.getElementById("result").innerHTML = `
                                Пользователь: ${userInfo.username}<br>
                                ID: ${userInfo.id}<br>
                                Имя: ${userInfo.firstName}
                            `;
                        } else {
                            document.getElementById("result").innerHTML = "Пользователь не найден";
                        }
                    }

                    displayUserInfo();
                } else {
                    throw new Error("Telegram WebApp не доступен");
                }
            } catch (error) {
                console.error("Error:", error);
                document.getElementById("result").innerHTML = `Ошибка: ${error.message}`;
            }
        });
    </script>
</body>
</html>
